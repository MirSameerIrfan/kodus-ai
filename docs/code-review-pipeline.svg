<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 14.0.2 (20251019.1705)
 -->
<!-- Title: CodeReviewPipeline Pages: 1 -->
<svg width="854pt" height="1343pt"
 viewBox="0.00 0.00 854.00 1343.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1338.78)">
<title>CodeReviewPipeline</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1338.78 849.78,-1338.78 849.78,4 -4,4"/>
<!-- ValidateNewCommits -->
<g id="node1" class="node">
<title>ValidateNewCommits</title>
<ellipse fill="none" stroke="black" cx="466.93" cy="-1316.78" rx="113.79" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="466.93" y="-1311.73" font-family="Times,serif" font-size="14.00">ValidateNewCommitsStage</text>
</g>
<!-- ResolveConfig -->
<g id="node2" class="node">
<title>ResolveConfig</title>
<ellipse fill="none" stroke="black" cx="466.93" cy="-1243.78" rx="86.67" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="466.93" y="-1238.73" font-family="Times,serif" font-size="14.00">ResolveConfigStage</text>
</g>
<!-- ValidateNewCommits&#45;&gt;ResolveConfig -->
<g id="edge1" class="edge">
<title>ValidateNewCommits&#45;&gt;ResolveConfig</title>
<path fill="none" stroke="black" d="M466.93,-1298.6C466.93,-1291.01 466.93,-1281.88 466.93,-1273.32"/>
<polygon fill="black" stroke="black" points="470.43,-1273.33 466.93,-1263.33 463.43,-1273.33 470.43,-1273.33"/>
</g>
<!-- ValidateConfig -->
<g id="node3" class="node">
<title>ValidateConfig</title>
<ellipse fill="none" stroke="black" cx="466.93" cy="-1170.78" rx="87.18" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="466.93" y="-1165.73" font-family="Times,serif" font-size="14.00">ValidateConfigStage</text>
</g>
<!-- ResolveConfig&#45;&gt;ValidateConfig -->
<g id="edge2" class="edge">
<title>ResolveConfig&#45;&gt;ValidateConfig</title>
<path fill="none" stroke="black" d="M466.93,-1225.6C466.93,-1218.01 466.93,-1208.88 466.93,-1200.32"/>
<polygon fill="black" stroke="black" points="470.43,-1200.33 466.93,-1190.33 463.43,-1200.33 470.43,-1200.33"/>
</g>
<!-- FetchFiles -->
<g id="node4" class="node">
<title>FetchFiles</title>
<ellipse fill="none" stroke="black" cx="466.93" cy="-1097.78" rx="102.53" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="466.93" y="-1092.73" font-family="Times,serif" font-size="14.00">FetchChangedFilesStage</text>
</g>
<!-- ValidateConfig&#45;&gt;FetchFiles -->
<g id="edge3" class="edge">
<title>ValidateConfig&#45;&gt;FetchFiles</title>
<path fill="none" stroke="black" d="M466.93,-1152.6C466.93,-1145.01 466.93,-1135.88 466.93,-1127.32"/>
<polygon fill="black" stroke="black" points="470.43,-1127.33 466.93,-1117.33 463.43,-1127.33 470.43,-1127.33"/>
</g>
<!-- LoadContext -->
<g id="node5" class="node">
<title>LoadContext</title>
<ellipse fill="none" stroke="black" cx="466.93" cy="-1024.78" rx="110.72" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="466.93" y="-1019.73" font-family="Times,serif" font-size="14.00">LoadExternalContextStage</text>
</g>
<!-- FetchFiles&#45;&gt;LoadContext -->
<g id="edge4" class="edge">
<title>FetchFiles&#45;&gt;LoadContext</title>
<path fill="none" stroke="black" d="M466.93,-1079.6C466.93,-1072.01 466.93,-1062.88 466.93,-1054.32"/>
<polygon fill="black" stroke="black" points="470.43,-1054.33 466.93,-1044.33 463.43,-1054.33 470.43,-1054.33"/>
</g>
<!-- InitialComment -->
<g id="node6" class="node">
<title>InitialComment</title>
<ellipse fill="none" stroke="black" cx="591.93" cy="-919.78" rx="90.76" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="591.93" y="-914.73" font-family="Times,serif" font-size="14.00">InitialCommentStage</text>
</g>
<!-- LoadContext&#45;&gt;InitialComment -->
<g id="edge5" class="edge">
<title>LoadContext&#45;&gt;InitialComment</title>
<path fill="none" stroke="black" d="M518.32,-1008.41C529.86,-1003.39 541.48,-996.93 550.93,-988.78 563.62,-977.84 573.5,-961.97 580.38,-948.31"/>
<polygon fill="black" stroke="black" points="583.51,-949.87 584.61,-939.33 577.18,-946.89 583.51,-949.87"/>
</g>
<!-- GlobalPack -->
<g id="node17" class="node">
<title>GlobalPack</title>
<ellipse fill="none" stroke="black" cx="356.93" cy="-854.79" rx="138.06" ry="28.99"/>
<text xml:space="preserve" text-anchor="middle" x="356.93" y="-857.99" font-family="Times,serif" font-size="14.00">CodeReviewContextPackService</text>
<text xml:space="preserve" text-anchor="middle" x="356.93" y="-841.49" font-family="Times,serif" font-size="14.00">(config contextReferenceId)</text>
</g>
<!-- LoadContext&#45;&gt;GlobalPack -->
<g id="edge16" class="edge">
<title>LoadContext&#45;&gt;GlobalPack</title>
<path fill="none" stroke="black" d="M400.6,-1010.05C389.68,-1005.03 379.55,-998.16 372.18,-988.78 351.69,-962.67 349.31,-924.3 351.22,-895.48"/>
<polygon fill="black" stroke="black" points="354.69,-895.94 352.09,-885.67 347.72,-895.33 354.69,-895.94"/>
<text xml:space="preserve" text-anchor="middle" x="459.56" y="-975.48" font-family="Times,serif" font-size="14.00">if config contextReferenceId &amp; </text>
<text xml:space="preserve" text-anchor="middle" x="459.56" y="-958.98" font-family="Times,serif" font-size="14.00">pack not cached</text>
</g>
<!-- FineTuning -->
<g id="node7" class="node">
<title>FineTuning</title>
<ellipse fill="none" stroke="black" cx="593.93" cy="-789.8" rx="94.86" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="593.93" y="-784.75" font-family="Times,serif" font-size="14.00">KodyFineTuningStage</text>
</g>
<!-- InitialComment&#45;&gt;FineTuning -->
<g id="edge6" class="edge">
<title>InitialComment&#45;&gt;FineTuning</title>
<path fill="none" stroke="black" d="M592.2,-901.52C592.53,-880.53 593.09,-844.79 593.48,-819.6"/>
<polygon fill="black" stroke="black" points="596.98,-819.76 593.64,-809.71 589.98,-819.65 596.98,-819.76"/>
</g>
<!-- AST -->
<g id="node8" class="node">
<title>AST</title>
<ellipse fill="none" stroke="black" cx="594.93" cy="-694.14" rx="100.48" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="594.93" y="-689.09" font-family="Times,serif" font-size="14.00">CodeAnalysisASTStage</text>
</g>
<!-- FineTuning&#45;&gt;AST -->
<g id="edge7" class="edge">
<title>FineTuning&#45;&gt;AST</title>
<path fill="none" stroke="black" d="M594.12,-771.62C594.26,-758.24 594.46,-739.37 594.63,-723.72"/>
<polygon fill="black" stroke="black" points="598.12,-724.08 594.73,-714.04 591.12,-724 598.12,-724.08"/>
</g>
<!-- ProcessPR -->
<g id="node9" class="node">
<title>ProcessPR</title>
<ellipse fill="none" stroke="black" cx="594.93" cy="-582.98" rx="134.78" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="594.93" y="-577.93" font-family="Times,serif" font-size="14.00">ProcessFilesPrLevelReviewStage</text>
</g>
<!-- AST&#45;&gt;ProcessPR -->
<g id="edge8" class="edge">
<title>AST&#45;&gt;ProcessPR</title>
<path fill="none" stroke="black" d="M594.93,-676.09C594.93,-659.12 594.93,-632.79 594.93,-612.61"/>
<polygon fill="black" stroke="black" points="598.43,-612.79 594.93,-602.79 591.43,-612.79 598.43,-612.79"/>
</g>
<!-- ProcessFiles -->
<g id="node10" class="node">
<title>ProcessFiles</title>
<ellipse fill="none" stroke="black" cx="346.93" cy="-509.98" rx="105.6" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="346.93" y="-504.93" font-family="Times,serif" font-size="14.00">ProcessFilesReviewStage</text>
</g>
<!-- ProcessPR&#45;&gt;ProcessFiles -->
<g id="edge9" class="edge">
<title>ProcessPR&#45;&gt;ProcessFiles</title>
<path fill="none" stroke="black" d="M539.59,-566.14C501.22,-555.15 450.06,-540.51 410.1,-529.07"/>
<polygon fill="black" stroke="black" points="411.18,-525.73 400.6,-526.35 409.25,-532.46 411.18,-525.73"/>
</g>
<!-- RulePack -->
<g id="node19" class="node">
<title>RulePack</title>
<ellipse fill="none" stroke="black" cx="707.93" cy="-404.98" rx="137.85" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="707.93" y="-399.93" font-family="Times,serif" font-size="14.00">buildContextPack (per KodyRule)</text>
</g>
<!-- ProcessPR&#45;&gt;RulePack -->
<g id="edge21" class="edge">
<title>ProcessPR&#45;&gt;RulePack</title>
<path fill="none" stroke="black" d="M605.97,-564.79C625.72,-534.03 667.21,-469.4 690.73,-432.78"/>
<polygon fill="black" stroke="black" points="693.57,-434.83 696.03,-424.52 687.68,-431.05 693.57,-434.83"/>
<text xml:space="preserve" text-anchor="middle" x="720.81" y="-513.18" font-family="Times,serif" font-size="14.00">ExternalReferenceLoader</text>
<text xml:space="preserve" text-anchor="middle" x="720.81" y="-496.68" font-family="Times,serif" font-size="14.00">per PR&#45;level rule</text>
</g>
<!-- CreatePRComments -->
<g id="node11" class="node">
<title>CreatePRComments</title>
<ellipse fill="none" stroke="black" cx="184.93" cy="-404.98" rx="125.56" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="184.93" y="-399.93" font-family="Times,serif" font-size="14.00">CreatePrLevelCommentsStage</text>
</g>
<!-- ProcessFiles&#45;&gt;CreatePRComments -->
<g id="edge10" class="edge">
<title>ProcessFiles&#45;&gt;CreatePRComments</title>
<path fill="none" stroke="black" d="M320.54,-492.2C293.44,-474.97 251.07,-448.03 220.91,-428.86"/>
<polygon fill="black" stroke="black" points="223.17,-426.15 212.86,-423.74 219.42,-432.06 223.17,-426.15"/>
</g>
<!-- ProcessFiles&#45;&gt;RulePack -->
<g id="edge20" class="edge">
<title>ProcessFiles&#45;&gt;RulePack</title>
<path fill="none" stroke="black" d="M353.44,-491.67C360.58,-473.64 372.22,-447.19 381.18,-440.98 397.36,-429.79 490.93,-420.5 573.82,-414.31"/>
<polygon fill="black" stroke="black" points="573.95,-417.81 583.66,-413.59 573.43,-410.83 573.95,-417.81"/>
<text xml:space="preserve" text-anchor="middle" x="450.56" y="-460.68" font-family="Times,serif" font-size="14.00">ExternalReferenceLoader</text>
<text xml:space="preserve" text-anchor="middle" x="450.56" y="-444.18" font-family="Times,serif" font-size="14.00">per file&#45;level rule</text>
</g>
<!-- CreateFileComments -->
<g id="node12" class="node">
<title>CreateFileComments</title>
<ellipse fill="none" stroke="black" cx="184.93" cy="-320.99" rx="110.72" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="184.93" y="-315.94" font-family="Times,serif" font-size="14.00">CreateFileCommentsStage</text>
</g>
<!-- CreatePRComments&#45;&gt;CreateFileComments -->
<g id="edge11" class="edge">
<title>CreatePRComments&#45;&gt;CreateFileComments</title>
<path fill="none" stroke="black" d="M184.93,-386.59C184.93,-376.16 184.93,-362.63 184.93,-350.65"/>
<polygon fill="black" stroke="black" points="188.43,-350.87 184.93,-340.87 181.43,-350.87 188.43,-350.87"/>
</g>
<!-- ASTCleanup -->
<g id="node13" class="node">
<title>ASTCleanup</title>
<ellipse fill="none" stroke="black" cx="184.93" cy="-237" rx="131.19" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="184.93" y="-231.95" font-family="Times,serif" font-size="14.00">CodeAnalysisASTCleanupStage</text>
</g>
<!-- CreateFileComments&#45;&gt;ASTCleanup -->
<g id="edge12" class="edge">
<title>CreateFileComments&#45;&gt;ASTCleanup</title>
<path fill="none" stroke="black" d="M184.93,-302.6C184.93,-292.17 184.93,-278.64 184.93,-266.66"/>
<polygon fill="black" stroke="black" points="188.43,-266.88 184.93,-256.88 181.43,-266.88 188.43,-266.88"/>
</g>
<!-- Aggregate -->
<g id="node14" class="node">
<title>Aggregate</title>
<ellipse fill="none" stroke="black" cx="184.93" cy="-164" rx="96.9" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="184.93" y="-158.95" font-family="Times,serif" font-size="14.00">AggregateResultsStage</text>
</g>
<!-- ASTCleanup&#45;&gt;Aggregate -->
<g id="edge13" class="edge">
<title>ASTCleanup&#45;&gt;Aggregate</title>
<path fill="none" stroke="black" d="M184.93,-218.81C184.93,-211.23 184.93,-202.1 184.93,-193.54"/>
<polygon fill="black" stroke="black" points="188.43,-193.54 184.93,-183.54 181.43,-193.54 188.43,-193.54"/>
</g>
<!-- UpdateComments -->
<g id="node15" class="node">
<title>UpdateComments</title>
<ellipse fill="none" stroke="black" cx="184.93" cy="-91" rx="184.93" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="184.93" y="-85.95" font-family="Times,serif" font-size="14.00">UpdateCommentsAndGenerateSummaryStage</text>
</g>
<!-- Aggregate&#45;&gt;UpdateComments -->
<g id="edge14" class="edge">
<title>Aggregate&#45;&gt;UpdateComments</title>
<path fill="none" stroke="black" d="M184.93,-145.81C184.93,-138.23 184.93,-129.1 184.93,-120.54"/>
<polygon fill="black" stroke="black" points="188.43,-120.54 184.93,-110.54 181.43,-120.54 188.43,-120.54"/>
</g>
<!-- RequestChanges -->
<g id="node16" class="node">
<title>RequestChanges</title>
<ellipse fill="none" stroke="black" cx="184.93" cy="-18" rx="134.78" ry="18"/>
<text xml:space="preserve" text-anchor="middle" x="184.93" y="-12.95" font-family="Times,serif" font-size="14.00">RequestChangesOrApproveStage</text>
</g>
<!-- UpdateComments&#45;&gt;RequestChanges -->
<g id="edge15" class="edge">
<title>UpdateComments&#45;&gt;RequestChanges</title>
<path fill="none" stroke="black" d="M184.93,-72.81C184.93,-65.23 184.93,-56.1 184.93,-47.54"/>
<polygon fill="black" stroke="black" points="188.43,-47.54 184.93,-37.54 181.43,-47.54 188.43,-47.54"/>
</g>
<!-- SharedContext -->
<g id="node18" class="node">
<title>SharedContext</title>
<ellipse fill="none" stroke="black" cx="345.93" cy="-694.14" rx="130.64" ry="40.66"/>
<text xml:space="preserve" text-anchor="middle" x="345.93" y="-705.59" font-family="Times,serif" font-size="14.00">sharedContextPack /</text>
<text xml:space="preserve" text-anchor="middle" x="345.93" y="-689.09" font-family="Times,serif" font-size="14.00">sharedContextAugmentations /</text>
<text xml:space="preserve" text-anchor="middle" x="345.93" y="-672.59" font-family="Times,serif" font-size="14.00">sharedSanitizedOverrides</text>
</g>
<!-- GlobalPack&#45;&gt;SharedContext -->
<g id="edge17" class="edge">
<title>GlobalPack&#45;&gt;SharedContext</title>
<path fill="none" stroke="black" d="M354.97,-825.43C353.45,-803.53 351.31,-772.66 349.49,-746.46"/>
<polygon fill="black" stroke="black" points="353,-746.42 348.81,-736.69 346.01,-746.91 353,-746.42"/>
</g>
<!-- SharedContext&#45;&gt;ProcessPR -->
<g id="edge19" class="edge">
<title>SharedContext&#45;&gt;ProcessPR</title>
<path fill="none" stroke="black" d="M386.68,-655.26C402.78,-642.06 422.11,-628.24 441.68,-618.98 458.8,-610.89 477.9,-604.61 496.64,-599.76"/>
<polygon fill="black" stroke="black" points="497.27,-603.21 506.15,-597.42 495.6,-596.41 497.27,-603.21"/>
<text xml:space="preserve" text-anchor="middle" x="516.31" y="-622.18" font-family="Times,serif" font-size="14.00">shared context for PR&#45;level</text>
</g>
<!-- SharedContext&#45;&gt;ProcessFiles -->
<g id="edge18" class="edge">
<title>SharedContext&#45;&gt;ProcessFiles</title>
<path fill="none" stroke="black" d="M319.51,-654.03C305.66,-628.58 293.54,-594.71 303.93,-564.98 307.53,-554.68 314.01,-544.88 320.87,-536.52"/>
<polygon fill="black" stroke="black" points="323.34,-539.01 327.33,-529.19 318.09,-534.37 323.34,-539.01"/>
<text xml:space="preserve" text-anchor="middle" x="377.43" y="-577.93" font-family="Times,serif" font-size="14.00">shared context for prompts</text>
</g>
<!-- ExternalRefs -->
<g id="node20" class="node">
<title>ExternalRefs</title>
<ellipse fill="none" stroke="black" cx="541.93" cy="-320.99" rx="113.14" ry="28.99"/>
<text xml:space="preserve" text-anchor="middle" x="541.93" y="-324.19" font-family="Times,serif" font-size="14.00">externalReferencesMap &amp;</text>
<text xml:space="preserve" text-anchor="middle" x="541.93" y="-307.69" font-family="Times,serif" font-size="14.00">mcpResultsMap</text>
</g>
<!-- RulePack&#45;&gt;ExternalRefs -->
<g id="edge22" class="edge">
<title>RulePack&#45;&gt;ExternalRefs</title>
<path fill="none" stroke="black" d="M673.94,-387.19C653.52,-377.11 626.94,-363.98 602.99,-352.15"/>
<polygon fill="black" stroke="black" points="604.78,-349.13 594.26,-347.84 601.68,-355.41 604.78,-349.13"/>
</g>
<!-- ExternalRefs&#45;&gt;ProcessPR -->
<g id="edge24" class="edge">
<title>ExternalRefs&#45;&gt;ProcessPR</title>
<path fill="none" stroke="black" d="M542.86,-350.32C544.31,-381.08 548.03,-431.51 557.43,-473.98 563.62,-501.91 574.72,-532.62 583.25,-554.12"/>
<polygon fill="black" stroke="black" points="579.99,-555.4 586.98,-563.36 586.48,-552.77 579.99,-555.4"/>
<text xml:space="preserve" text-anchor="middle" x="609.18" y="-460.68" font-family="Times,serif" font-size="14.00">extendedContext</text>
<text xml:space="preserve" text-anchor="middle" x="609.18" y="-444.18" font-family="Times,serif" font-size="14.00">(PR&#45;level analysis)</text>
</g>
<!-- ExternalRefs&#45;&gt;ProcessFiles -->
<g id="edge23" class="edge">
<title>ExternalRefs&#45;&gt;ProcessFiles</title>
<path fill="none" stroke="black" d="M478.22,-345.24C436.69,-364.12 385.74,-395.19 360.93,-440.98 354.45,-452.95 350.96,-467.59 349.09,-480.21"/>
<polygon fill="black" stroke="black" points="345.62,-479.7 347.92,-490.05 352.58,-480.53 345.62,-479.7"/>
<text xml:space="preserve" text-anchor="middle" x="463.54" y="-408.18" font-family="Times,serif" font-size="14.00">extendedContext</text>
<text xml:space="preserve" text-anchor="middle" x="463.54" y="-391.68" font-family="Times,serif" font-size="14.00">(classifier/generator)</text>
</g>
</g>
</svg>
